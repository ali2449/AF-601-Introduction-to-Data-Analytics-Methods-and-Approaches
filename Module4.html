<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Functions Mastery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/eclipse.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap');
        
        :root {
            --bg-color: #0f172a;
            --text-color: #e2e8f0;
            --section-bg: #1e293b;
            --code-bg: #020617;
            --border-color: #334155;
            --header-color: #38bdf8;
            --accent-color: #6366f1;
            --accent-hover: #4f46e5;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
        }

        [data-theme="light"] {
            --bg-color: #f1f5f9;
            --text-color: #1e293b;
            --section-bg: #ffffff;
            --code-bg: #f8fafc;
            --border-color: #e2e8f0;
            --header-color: #1d4ed8;
            --accent-color: #4f46e5;
            --accent-hover: #4338ca;
            --success-color: #059669;
            --error-color: #dc2626;
            --warning-color: #d97706;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6;
        }

        .section-card {
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .btn-primary {
            background-color: var(--accent-color);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            color: white;
            transition: background-color 0.2s;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
        }

        .CodeMirror {
            height: auto;
            min-height: 150px;
            border-radius: 0.5rem;
            font-size: 14px;
            margin: 0.5rem 0;
            transition: background-color 0.3s;
        }
        
        .output-area {
            background-color: var(--code-bg);
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            font-family: monospace;
            font-size: 14px;
            min-height: 60px;
            white-space: pre-wrap;
            transition: background-color 0.3s;
        }

        .chapter-title {
            color: var(--header-color);
            font-weight: bold;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--header-color);
            padding-bottom: 0.5rem;
        }

        .function-title {
            color: var(--header-color);
            font-weight: bold;
            margin: 1.5rem 0 0.5rem 0;
            font-size: 1.2rem;
        }

        .concept-box {
            background-color: var(--section-bg);
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            transition: background-color 0.3s;
        }

        .explanation-box {
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .status-indicator {
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s;
        }
        
        .status-loading {
            background-color: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }
        
        .status-ready {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid var(--success-color);
        }

        .status-error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid var(--error-color);
        }

        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 100;
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .theme-toggle:hover {
            background-color: var(--border-color);
        }

        .table-of-contents {
            position: sticky;
            top: 1rem;
            max-height: calc(100vh - 2rem);
            overflow-y: auto;
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .toc-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: color 0.2s;
        }

        .toc-item:hover {
            color: var(--header-color);
        }

        .toc-item:last-child {
            border-bottom: none;
        }

        .progress-bar {
            height: 4px;
            background-color: var(--border-color);
            border-radius: 2px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s;
        }

        .code-container {
            position: relative;
            margin: 1.5rem 0;
        }

        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            color: var(--text-color);
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s, background-color 0.2s;
            z-index: 10;
        }

        .copy-button:hover {
            opacity: 1;
            background-color: var(--border-color);
        }

        .success-message {
            color: var(--success-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }

        .info-box {
            background-color: var(--code-bg);
            border-left: 4px solid var(--header-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        .warning-box {
            background-color: #fef3c7;
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            color: #92400e;
        }

        .key-point {
            background-color: var(--accent-color);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: bold;
            margin: 0 0.25rem;
        }

        .real-world-example {
            background-color: var(--section-bg);
            border: 2px dashed var(--success-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .learning-objectives {
            background: linear-gradient(135deg, var(--accent-color), var(--header-color));
            color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
        }

        .prerequisites {
            background-color: var(--code-bg);
            border-left: 4px solid var(--warning-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }

        @media (max-width: 768px) {
            .table-of-contents {
                position: static;
                max-height: none;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

<div class="theme-toggle" id="theme-toggle">
    <span id="theme-icon">üåô</span>
</div>

<div class="max-w-6xl mx-auto">
    <header class="text-center mb-8">
        <h1 class="text-4xl font-extrabold mb-4" id="module-title">Python Functions Mastery</h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-4" id="module-description">A comprehensive guide to understanding and mastering Python functions - from basics to advanced concepts</p>
        <div id="status-indicator" class="status-indicator status-loading">
            ‚è≥ Loading Pyodide... This may take a few seconds.
        </div>
        <div id="progress-bar" class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Table of Contents -->
        <div class="lg:col-span-1">
            <div class="table-of-contents">
                <h2 class="font-bold text-lg mb-4">Table of Contents</h2>
                <div id="toc-list">
                    <!-- TOC items will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="lg:col-span-3">
            <!-- Module Overview Section -->
            <section class="section-card" id="module-overview">
                <div class="chapter-title">Module Overview</div>
                
                <div class="learning-objectives">
                    <h3 class="font-bold text-lg mb-3">üéØ Learning Objectives</h3>
                    <ul class="list-disc pl-6" id="learning-objectives-list">
                        <li>Understand the fundamental purpose and power of functions</li>
                        <li>Master function definition, parameters, and return values</li>
                        <li>Learn different types of arguments and when to use them</li>
                        <li>Understand variable scope and the global keyword</li>
                        <li>Explore advanced concepts like lambda functions and recursion</li>
                        <li>Apply functions to real-world programming scenarios</li>
                    </ul>
                </div>

                <div class="prerequisites">
                    <h3 class="font-bold mb-2">üìã Prerequisites</h3>
                    <ul class="list-disc pl-6" id="prerequisites-list">
                        <li>Basic Python syntax knowledge</li>
                        <li>Understanding of variables and data types</li>
                        <li>Familiarity with control structures (if statements, loops)</li>
                    </ul>
                </div>

                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">The Power of Functions</h3>
                    <p class="mb-3">
                        Functions represent a cornerstone of effective programming, serving as organized, reusable blocks of code that perform single, specific tasks. They encapsulate logic, allowing you to invoke complex operations with simple, descriptive names rather than rewriting code repeatedly. This adherence to the <span class="key-point">DRY (Don't Repeat Yourself)</span> principle saves development time and reduces errors.
                    </p>
                    <p>
                        Beyond repetition, functions enhance code organization and readability by breaking complex programs into smaller, manageable parts. This <span class="key-point">modular approach</span> enables building large-scale, scalable systems and is fundamental across Python's diverse applications.
                    </p>
                </div>
            </section>

            <!-- Chapter 0: Why Use Functions? -->
            <section class="section-card" id="chapter-0">
                <div class="chapter-title">Chapter 0: Why Use Functions?</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Three Key Principles</h3>
                    <p class="mb-3">
                        In large-scale software development, functions are essential for efficiency and maintainability through three key principles:
                    </p>
                </div>

                <div class="explanation-box">
                    <h4 class="font-bold mb-2">1. Reusability</h4>
                    <p class="mb-3">Write logic once, use it multiple times. Fix bugs or update logic in one place instead of throughout your codebase.</p>
                    
                    <h4 class="font-bold mb-2">2. Modularity</h4>
                    <p class="mb-3">Break complex problems into smaller, manageable sub-problems. Each function solves a single, well-defined task.</p>
                    
                    <h4 class="font-bold mb-2">3. Abstraction</h4>
                    <p class="mb-3">Use functions by name without knowing internal details. Simplify high-level program design using functions as building blocks.</p>
                </div>

                <div class="function-title">Reusability in Action</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Step-by-Step Example</h4>
                    <p class="mb-3">
                        Let's see reusability in action. We'll create a simple function to calculate the area of a rectangle and reuse it for three different rectangles.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor0_1" class="code-editor">
def calculate_area(length, width):
    return length * width

area1 = calculate_area(10, 5)
print("The area of the first rectangle is: {}".format(area1))

area2 = calculate_area(7, 9)
print("The area of the second rectangle is: {}".format(area2))

area3 = calculate_area(15, 8)
print("The area of the third rectangle is: {}".format(area3))</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output0_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

            </section>

            <!-- Chapter 1: Your First Python Function -->
            <section class="section-card" id="chapter-1">
                <div class="chapter-title">Chapter 1: Your First Python Function</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Function Anatomy</h3>
                    <p class="mb-3">
                        Creating a function in Python begins with the <code>def</code> keyword (for "define"), followed by a descriptive function name, parentheses, and a colon. The function body is indented and contains the code to be executed.
                    </p>
                </div>

                <div class="function-title">1.1 Basic Function Definition</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Understanding the Structure</h4>
                    <p class="mb-3">
                        This example demonstrates a simple greeting function that takes a name parameter and returns a personalized message.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor1_1" class="code-editor">
def greet(name):
    # The code to be executed is indented
    message = "Hello, {}!".format(name)
    return message

# Now call the function to see the output
print(greet("Jane"))</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output1_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="function-title">1.2 Calling Functions</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Executing Your Functions</h4>
                    <p class="mb-3">
                        Functions remain dormant until explicitly called. To execute a function, use its name followed by parentheses, with arguments inside if needed.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor1_2" class="code-editor">
print(greet("Alice"))</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output1_2" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="function-title">1.3 Return vs Print</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Crucial Distinction</h4>
                    <p class="mb-3">
                        <code>print()</code> produces a side effect - it displays information to the console but doesn't pass data back. <code>return</code> is a data transfer mechanism that sends a value back to the caller, making functions reusable components.
                    </p>
                    
                    <div class="real-world-example">
                        <h5 class="font-semibold mb-2">üí° Key Insight:</h5>
                        <p>Functions that return values become data producers, enabling chains of operations where one function's output becomes another's input.</p>
                    </div>
                </div>

            </section>

            <!-- Chapter 2: Arguments and Parameters -->
            <section class="section-card" id="chapter-2">
                <div class="chapter-title">Chapter 2: Mastering Arguments and Parameters</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Parameters vs Arguments</h3>
                    <p class="mb-3">
                        <b>Parameters</b> are placeholders defined in a function's signature. <b>Arguments</b> are the actual values passed when calling the function. Python provides flexible argument handling for simplicity, clarity, and adaptability.
                    </p>
                </div>

                <div class="function-title">2.1 Positional Arguments</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Order Matters</h4>
                    <p class="mb-3">
                        Positional arguments are matched to parameters based on their order. Simple but prone to errors if order is mixed up.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor2_1" class="code-editor">
def add_numbers(a, b):
    return a + b
result = add_numbers(3, 5) # 3 is for 'a', 5 is for 'b'
print(result) # Output: 8</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output2_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="function-title">2.2 Keyword Arguments</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Clarity Through Naming</h4>
                    <p class="mb-3">
                        Keyword arguments are passed by explicitly specifying parameter names. Order becomes irrelevant, making code more readable and less error-prone.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor2_2" class="code-editor">
def greet(name, message):
    print("{}, {}!".format(message, name)) # The order can be swapped without issue
greet(message="Hello", name="Alice") # Output: Hello, Alice!
greet(name="Alice", message="Hello") # Output: Hello, Alice!</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output2_2" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="function-title">2.3 Default Arguments</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Optional Parameters</h4>
                    <p class="mb-3">
                        Default arguments have predefined values, making parameters optional. If a value is provided, it overrides the default; otherwise, the default is used.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor2_3" class="code-editor">
def greet(name="Guest"):
    print("Hello, {}!".format(name))
greet() # Uses the default value, output: Hello, Guest!
greet("Alice") # Overrides the default, output: Hello, Alice!</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output2_3" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="warning-box">
                    <h4 class="font-bold mb-2">‚ö†Ô∏è Important Warning</h4>
                    <p>Avoid using mutable objects (lists, dictionaries) as default values. They're created once and shared across all calls, causing unexpected side effects. Use <code>None</code> instead and create the object inside the function.</p>
                </div>

                <div class="function-title">2.4 Variable-Length Arguments</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Flexible Input Handling</h4>
                    <p class="mb-3">
                        <code>*args</code> collects positional arguments into a tuple, <code>**kwargs</code> collects keyword arguments into a dictionary. Essential for functions with unknown numbers of inputs.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor2_4" class="code-editor">
def calculate_sum(*numbers):
    total = sum(numbers)
    return total
print(calculate_sum(1, 2, 3)) # Output: 6
print(calculate_sum(1, 2, 3, 4, 5)) # Output: 15

def introduce(**details):
    for key, value in details.items():
        print("{}: {}".format(key, value))
introduce(Name="Alice", Age=25, City="New York")</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output2_4" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="info-box">
                    <h4 class="font-bold mb-2">üìä Argument Summary</h4>
                    <table class="w-full mt-2">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left p-2">Type</th>
                                <th class="text-left p-2">Syntax</th>
                                <th class="text-left p-2">Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-2">Positional</td>
                                <td class="p-2"><code>func(a, b)</code></td>
                                <td class="p-2">Simple functions with clear order</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Keyword</td>
                                <td class="p-2"><code>func(b=5, a=3)</code></td>
                                <td class="p-2">Many parameters or clarity needed</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Default</td>
                                <td class="p-2"><code>func(name="Guest")</code></td>
                                <td class="p-2">Common or non-essential inputs</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2"><code>*args</code></td>
                                <td class="p-2"><code>def func(*args)</code></td>
                                <td class="p-2">Unknown number of inputs</td>
                            </tr>
                            <tr>
                                <td class="p-2"><code>**kwargs</code></td>
                                <td class="p-2"><code>def func(**kwargs)</code></td>
                                <td class="p-2">Flexible, named inputs</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </section>

            <!-- Chapter 3: Return Statements -->
            <section class="section-card" id="chapter-3">
                <div class="chapter-title">Chapter 3: Managing Data with Return</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Return Mechanics</h3>
                    <p class="mb-3">
                        The <code>return</code> statement is the primary way functions send results back to callers. Understanding return values is crucial for creating useful, reusable functions.
                    </p>
                </div>

                <div class="function-title">3.1 Returning Multiple Values</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Tuple Packing and Unpacking</h4>
                    <p class="mb-3">
                        Python functions can return multiple values using tuple packing. The comma-separated values are packed into a tuple, which can be unpacked by the caller into separate variables.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor3_1" class="code-editor">
def get_user_data():
    return 'Anna', 23, 'anna123' # This is a tuple ('Anna', 23, 'anna123')
name, age, id = get_user_data() # Unpacking the tuple
print("Name: {}, Age: {}, ID: {}".format(name, age, id))
# Output: Name: Anna, Age: 23, ID: anna123</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output3_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="info-box">
                    <h4 class="font-bold mb-2">üí° The None Return</h4>
                    <p>Functions without a <code>return</code> statement automatically return <code>None</code>. This indicates the function performed a task but didn't produce a value for further use.</p>
                </div>

            </section>

            <!-- Chapter 4: Variable Scope -->
            <section class="section-card" id="chapter-4">
                <div class="chapter-title">Chapter 4: The World of Variable Scope</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Understanding Scope</h3>
                    <p class="mb-3">
                        Variable <b>scope</b> determines where a variable can be accessed. Python follows the <span class="key-point">LEGB rule</span>: Local, Enclosing, Global, Built-in. Understanding scope prevents <code>NameError</code> and helps write predictable code.
                    </p>
                </div>

                <div class="function-title">4.1 The Global Keyword</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Modifying Global Variables</h4>
                    <p class="mb-3">
                        By default, assigning to a variable inside a function creates a new local variable (shadowing). To modify a global variable, use the <code>global</code> keyword to explicitly declare your intent.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor4_1" class="code-editor">
x = 10 # Global variable
def modify_x():
    # This creates a new local variable 'x'
    x = 5 
    print("Inside: x is now {}".format(x))
modify_x()
print("Outside: x is still {}".format(x))

def modify_global_x():
    global x # Declares intent to modify the global variable
    x = 5 # Modifies the global x
    print("Inside: x is now {}".format(x))
modify_global_x()
print("Outside: x is now {}".format(x))</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output4_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="warning-box">
                    <h4 class="font-bold mb-2">‚ö†Ô∏è Use Global With Care</h4>
                    <p>Using <code>global</code> overrides Python's safety features. Changing shared variables from different program parts can create complex dependencies and make debugging difficult.</p>
                </div>

                <div class="info-box">
                    <h4 class="font-bold mb-2">üìä Scope Comparison</h4>
                    <table class="w-full mt-2">
                        <thead>
                            <tr class="border-b">
                                <th class="text-left p-2">Characteristic</th>
                                <th class="text-left p-2">Local</th>
                                <th class="text-left p-2">Global</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-2">Definition</td>
                                <td class="p-2">Inside function</td>
                                <td class="p-2">Outside all functions</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Scope</td>
                                <td class="p-2">Function only</td>
                                <td class="p-2">Entire program</td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Lifetime</td>
                                <td class="p-2">During function execution</td>
                                <td class="p-2">Program duration</td>
                            </tr>
                            <tr>
                                <td class="p-2">Modification</td>
                                <td class="p-2">No special keyword</td>
                                <td class="p-2"><code>global</code> required</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </section>

            <!-- Chapter 5: Advanced Concepts -->
            <section class="section-card" id="chapter-5">
                <div class="chapter-title">Chapter 5: Advanced Functional Concepts</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Beyond Basics</h3>
                    <p class="mb-3">
                        Python offers powerful functional programming tools that enable elegant solutions to complex problems. Lambda functions and recursion provide concise ways to express certain types of logic.
                    </p>
                </div>

                <div class="function-title">5.1 Lambda Functions</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Anonymous One-Liners</h4>
                    <p class="mb-3">
                        Lambda functions are small, anonymous functions created with the <code>lambda</code> keyword. They're perfect for simple operations and are commonly used with higher-order functions like <code>map()</code>, <code>filter()</code>, and <code>sorted()</code>.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor5_1" class="code-editor">
numbers = [1, 2, 3, 4, 5, 6]
# Use lambda with map() to double each number
doubled_numbers = list(map(lambda x: x * 2, numbers))
print(doubled_numbers) # Output: [2, 4, 6, 8, 10, 12]

# Use lambda with filter() to get only even numbers
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(evens) # Output: [2, 4, 6]</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output5_1" class="output-area">Click 'Run Code' to see output...</div>
                </div>

                <div class="function-title">5.2 Recursive Functions</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Self-Referential Logic</h4>
                    <p class="mb-3">
                        Recursive functions call themselves to solve problems that can be broken into smaller, similar sub-problems. Every recursive function needs a <span class="key-point">base case</span> to prevent infinite recursion.
                    </p>
                </div>

                <div class="code-container">
                    <textarea id="editor5_2" class="code-editor">
def factorial(n):
    # Base case: if n is 1, stop the recursion and return 1
    if n == 1:
        return 1
    else:
        # Recursive case: call the function with a smaller number
        return n * factorial(n - 1)
print(factorial(5)) # Output: 120
# 5 * factorial(4) -> 5 * (4 * factorial(3)) ->...</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output5_2" class="output-area">Click 'Run Code' to see output...</div>
                </div>

            </section>

            <!-- Project Section -->
            <section class="section-card" id="project-section">
                <div class="chapter-title">Final Project: Data Processing System</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">Comprehensive Application</h3>
                    <p class="mb-3">
                        Apply everything you've learned to build a complete data processing system that demonstrates real-world function usage across different scenarios.
                    </p>
                </div>

                <div class="function-title">Project Implementation</div>
                
                <div class="explanation-box">
                    <h4 class="font-bold mb-2">Complete Data Pipeline</h4>
                    <p class="mb-3">
                        This project combines data validation, processing, analysis, and reporting into a cohesive system that showcases modular function design and reusability.
                    </p>
                    
                    <div class="real-world-example">
                        <h5 class="font-semibold mb-2">üí° Real-World Application:</h5>
                        <p>This type of system is used in data science, web development, and automation to create reusable pipelines that can process various datasets with consistent logic.</p>
                    </div>
                </div>

                <div class="code-container">
                    <textarea id="editor-project" class="code-editor">
def validate_data(*scores):
    """Validate that all scores are numbers between 0-100"""
    for score in scores:
        if not isinstance(score, (int, float)) or score < 0 or score > 100:
            return False
    return True

def calculate_statistics(*scores):
    """Calculate comprehensive statistics using variable arguments"""
    if not validate_data(*scores):
        return "Invalid data provided"
    
    return {
        'count': len(scores),
        'mean': sum(scores) / len(scores),
        'max': max(scores),
        'min': min(scores),
        'passed': len([s for s in scores if s >= 60])
    }

def generate_report(**data):
    """Generate a formatted report using keyword arguments"""
    report = []
    report.append("=== DATA ANALYSIS REPORT ===")
    for key, value in data.items():
        report.append(f"{key.replace('_', ' ').title()}: {value}")
    report.append("=" * 30)
    return '\n'.join(report)

def process_student_data(student_name, *scores, **options):
    """Complete data processing with all argument types"""
    verbose = options.get('verbose', False)
    
    if verbose:
        print(f"Processing data for {student_name}")
    
    stats = calculate_statistics(*scores)
    
    if verbose:
        print("Statistics calculated successfully")
    
    # Add student name to stats
    stats['student'] = student_name
    
    return generate_report(**stats)

# Main execution
def main():
    # Process multiple students
    students = [
        ("Alice", 85, 92, 78, 88, 95),
        ("Bob", 45, 67, 89, 76, 54),
        ("Charlie", 90, 85, 92, 88, 96)
    ]
    
    for name, *scores in students:
        print(process_student_data(name, *scores, verbose=True))
        print()

# Run the complete system
main()</textarea>
                    <button class="copy-button">Copy</button>
                    <button class="run-button btn-primary mt-2">Run Code</button>
                    <div id="output-project" class="output-area">Click 'Run Code' to see output...</div>
                </div>

            </section>

            <!-- Summary Section -->
            <section class="section-card" id="summary">
                <div class="chapter-title">Summary & Next Steps</div>
                
                <div class="concept-box">
                    <h3 class="font-bold mb-2 text-lg">What You've Learned</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h4 class="font-semibold mb-2">‚úÖ Key Takeaways:</h4>
                            <ul class="list-disc pl-6" id="key-takeaways">
                                <li>Functions encapsulate logic for reusability and organization</li>
                                <li>Different argument types serve specific purposes</li>
                                <li>Return values make functions data producers</li>
                                <li>Scope management prevents naming conflicts</li>
                                <li>Advanced concepts enable elegant solutions</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold mb-2">üöÄ Next Steps:</h4>
                            <ul class="list-disc pl-6" id="next-steps">
                                <li>Practice with more complex function combinations</li>
                                <li>Explore Python's built-in higher-order functions</li>
                                <li>Learn about decorators for function enhancement</li>
                                <li>Study object-oriented programming with methods</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-box mt-6">
                    <h4 class="font-bold mb-2">üìö Additional Resources</h4>
                    <ul class="list-disc pl-6" id="additional-resources">
                        <li>Official Python documentation on functions</li>
                        <li>PEP 8 - Style Guide for Python Code</li>
                        <li>Real Python function tutorials</li>
                        <li>Python Cookbook for advanced patterns</li>
                    </ul>
                </div>
            </section>

        </div>
    </div>
</div>

<script>
// Configuration
const MODULE_CONFIG = {
    title: "Python Functions Mastery",
    description: "A comprehensive guide to understanding and mastering Python functions - from basics to advanced concepts",
    learningObjectives: [
        "Understand the fundamental purpose and power of functions",
        "Master function definition, parameters, and return values", 
        "Learn different types of arguments and when to use them",
        "Understand variable scope and the global keyword",
        "Explore advanced concepts like lambda functions and recursion",
        "Apply functions to real-world programming scenarios"
    ],
    prerequisites: [
        "Basic Python syntax knowledge",
        "Understanding of variables and data types",
        "Familiarity with control structures (if statements, loops)"
    ],
    chapters: [
        { id: "module-overview", title: "Module Overview" },
        { id: "chapter-0", title: "Chapter 0: Why Use Functions?" },
        { id: "chapter-1", title: "Chapter 1: Your First Python Function" },
        { id: "chapter-2", title: "Chapter 2: Arguments and Parameters" },
        { id: "chapter-3", title: "Chapter 3: Return Statements" },
        { id: "chapter-4", title: "Chapter 4: Variable Scope" },
        { id: "chapter-5", title: "Chapter 5: Advanced Concepts" },
        { id: "project-section", title: "Final Project" },
        { id: "summary", title: "Summary & Next Steps" }
    ]
};

let pyodide;
let isPyodideReady = false;
let currentTheme = 'dark';

// Initialize module content
function initializeModuleContent() {
    // Set module title and description
    document.getElementById('module-title').textContent = MODULE_CONFIG.title;
    document.getElementById('module-description').textContent = MODULE_CONFIG.description;
    
    // Set learning objectives
    const objectivesList = document.getElementById('learning-objectives-list');
    objectivesList.innerHTML = '';
    MODULE_CONFIG.learningObjectives.forEach(obj => {
        const li = document.createElement('li');
        li.textContent = obj;
        objectivesList.appendChild(li);
    });
    
    // Set prerequisites
    const prereqList = document.getElementById('prerequisites-list');
    prereqList.innerHTML = '';
    MODULE_CONFIG.prerequisites.forEach(prereq => {
        const li = document.createElement('li');
        li.textContent = prereq;
        prereqList.appendChild(li);
    });
}

function addToOutput(outputId, text) {
    const outputElement = document.getElementById(outputId);
    if (outputElement) {
        outputElement.textContent += text;
    }
}

function updateProgress(percentage) {
    const progressFill = document.getElementById('progress-fill');
    if (progressFill) {
        progressFill.style.width = `${percentage}%`;
    }
}

function toggleTheme() {
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    currentTheme = newTheme;
    
    const themeIcon = document.getElementById('theme-icon');
    themeIcon.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    
    // Update CodeMirror theme
    document.querySelectorAll('.CodeMirror').forEach(cm => {
        cm.CodeMirror.setOption('theme', newTheme === 'dark' ? 'monokai' : 'eclipse');
    });
    
    // Save preference
    localStorage.setItem('theme', newTheme);
}

function generateTableOfContents() {
    const tocList = document.getElementById('toc-list');
    tocList.innerHTML = '';
    
    MODULE_CONFIG.chapters.forEach(chapter => {
        const tocItem = document.createElement('div');
        tocItem.className = 'toc-item';
        tocItem.textContent = chapter.title;
        tocItem.addEventListener('click', () => {
            document.getElementById(chapter.id).scrollIntoView({ behavior: 'smooth' });
        });
        tocList.appendChild(tocItem);
    });
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        // Show success message
        const successMessage = document.createElement('div');
        successMessage.className = 'success-message';
        successMessage.textContent = 'Code copied to clipboard!';
        
        // Remove any existing success message
        const existingMessage = document.querySelector('.success-message');
        if (existingMessage) {
            existingMessage.remove();
        }
        
        // Add the new message
        document.querySelector('.code-container').appendChild(successMessage);
        
        // Remove after 2 seconds
        setTimeout(() => {
            successMessage.remove();
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

async function initializePyodide() {
    try {
        const statusElement = document.getElementById('status-indicator');
        statusElement.textContent = "üîÑ Loading Pyodide runtime...";
        updateProgress(20);
        
        pyodide = await loadPyodide({
            indexURL: "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"
        });
        
        statusElement.textContent = "üì¶ Loading required packages...";
        updateProgress(60);
        
        // No additional packages needed for basic Python functions
        await pyodide.loadPackage("micropip");
        
        await pyodide.runPythonAsync(`
import sys
import js

class OutputCapture:
    def __init__(self, output_id):
        self.output_id = output_id
    def write(self, text):
        js.addToOutput(self.output_id, text)
    def flush(self):
        pass
original_stdout = sys.stdout
`);

        statusElement.className = "status-indicator status-ready";
        statusElement.textContent = "‚úÖ Environment loaded successfully! You can now run the examples.";
        updateProgress(100);
        isPyodideReady = true;
        
    } catch (error) {
        console.error("Error:", error);
        const statusElement = document.getElementById('status-indicator');
        statusElement.className = "status-indicator status-error";
        statusElement.textContent = "‚ùå Error loading environment: " + error.message;
    }
}

async function runPythonCode(code, outputElement) {
    if (!isPyodideReady) {
        outputElement.textContent = "Environment not loaded yet. Please wait...";
        return;
    }

    try {
        outputElement.textContent = "Running...";
        const outputId = outputElement.id;
        
        await pyodide.runPythonAsync(`
import sys
output_capture = OutputCapture("${outputId}")
sys.stdout = output_capture
`);

        await pyodide.runPythonAsync(code);
        
        await pyodide.runPythonAsync(`sys.stdout = original_stdout`);
        
    } catch (error) {
        outputElement.textContent = "Error: " + error.message;
    }
}

window.addToOutput = addToOutput;

document.addEventListener('DOMContentLoaded', async () => {
    // Initialize module content
    initializeModuleContent();
    
    // Set initial theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
    currentTheme = savedTheme;
    
    const themeIcon = document.getElementById('theme-icon');
    themeIcon.textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    
    // Generate table of contents
    generateTableOfContents();
    
    // Initialize Pyodide
    await initializePyodide();

    // Set up code editors and event listeners
    document.querySelectorAll('.code-container').forEach(container => {
        const codeTextArea = container.querySelector('.code-editor');
        const runButton = container.querySelector('.run-button');
        const copyButton = container.querySelector('.copy-button');
        const outputArea = container.querySelector('.output-area');

        const codeEditor = CodeMirror.fromTextArea(codeTextArea, {
            lineNumbers: true,
            mode: 'python',
            theme: currentTheme === 'dark' ? 'monokai' : 'eclipse',
            value: codeTextArea.value
        });

        runButton.addEventListener('click', async () => {
            const code = codeEditor.getValue();
            await runPythonCode(code, outputArea);
        });
        
        copyButton.addEventListener('click', () => {
            const code = codeEditor.getValue();
            copyToClipboard(code);
        });
    });
    
    // Set up theme toggle
    document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
});
</script>
</body>
</html>
