<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Midterm Practice</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Skulpt for running Python in the browser -->
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/skulpt@1.2.0/dist/skulpt-stdlib.js"></script>
    
    <!-- CodeMirror for enhanced code editing -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap');

        :root {
            --bg-color: #0f172a;
            --text-color: #e2e8f0;
            --section-bg: #1e293b;
            --code-bg: #020617;
            --border-color: #334155;
            --header-color: #38bdf8;
            --accent-color: #6366f1;
            --accent-hover: #4f46e5;
            --error-color: #f87171;
            --success-color: #34d399;
            --sample-color: #fbbf24;
            --module1-color: #10b981;
            --mcq-color: #ec4899;
            --timer-color: #ef4444;
            --warning-color: #f59e0b;
        }

        [data-theme="light"] {
            --bg-color: #f1f5f9;
            --text-color: #1e293b;
            --section-bg: #ffffff;
            --code-bg: #f8fafc;
            --border-color: #e2e8f0;
            --header-color: #1d4ed8;
            --accent-color: #4f46e5;
            --accent-hover: #4338ca;
            --error-color: #dc2626;
            --success-color: #10b981;
            --sample-color: #d97706;
            --module1-color: #059669;
            --mcq-color: #db2777;
            --timer-color: #dc2626;
            --warning-color: #d97706;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        h1, h2 {
            color: var(--header-color);
        }

        .section-card {
            background-color: var(--section-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            background-color: var(--accent-color);
            transition: background-color 0.2s, transform 0.1s;
        }

        .btn-primary:hover {
            background-color: var(--accent-hover);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: var(--section-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            transition: background-color 0.2s, border-color 0.2s, color 0.2s;
        }
        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        /* Code Editor Styling */
        .code-editor {
            width: 100%;
            height: 200px;
            background-color: var(--code-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            margin-top: 12px;
        }

        /* Output area */
        .output-area {
            max-height: 150px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
            background-color: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            color: var(--text-color);
            padding: 0.75rem;
            margin-top: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }

        .text-red-400 {
            color: var(--error-color);
        }
        
        .text-green-400 {
            color: var(--success-color);
        }
        
        .text-yellow-400 {
            color: var(--sample-color);
        }
        
        .text-orange-400 {
            color: var(--warning-color);
        }
        
        .question-number {
            background-color: var(--accent-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
        }
        
        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .copy-success {
            color: var(--success-color);
            font-weight: bold;
            display: none;
        }
        
        .code-container {
            margin-top: 16px;
        }
        
        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 12px;
        }

        .sample-solution {
            background-color: var(--code-bg);
            border: 1px solid var(--sample-color);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 12px;
            position: relative;
        }

        .sample-header {
            color: var(--sample-color);
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toggle-solution {
            background: none;
            border: none;
            color: var(--sample-color);
            cursor: pointer;
            font-size: 12px;
            margin-left: auto;
        }

        .solution-content {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            line-height: 1.5;
        }

        .hidden {
            display: none;
        }

        .module-tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 12px;
        }

        .module-1 { background-color: var(--module1-color); color: white; }
        .mcq-tag { background-color: var(--mcq-color); color: white; }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--module1-color);
            transition: width 0.3s ease;
        }

        .module-section {
            border-left: 4px solid var(--module1-color);
            padding-left: 16px;
            margin-bottom: 2rem;
        }

        /* Timer Styling */
        .timer-container {
            background-color: var(--section-bg);
            border: 1px solid var(--timer-color);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--timer-color);
        }

        .timer-warning {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Multiple Choice Questions Styling */
        .mcq-container {
            background-color: var(--section-bg);
            border: 1px solid var(--mcq-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .mcq-question {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .mcq-option {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mcq-option:hover {
            background-color: var(--code-bg);
            border-color: var(--mcq-color);
        }

        .mcq-option.selected {
            background-color: var(--mcq-color);
            border-color: var(--mcq-color);
            color: white;
        }

        .mcq-option input[type="radio"] {
            margin-top: 0.125rem;
        }

        .mcq-option label {
            cursor: pointer;
            flex: 1;
        }

        .mcq-submitted {
            opacity: 0.7;
        }

        .mcq-submitted .mcq-option {
            cursor: not-allowed;
        }

        .mcq-submitted .mcq-option:not(.selected) {
            opacity: 0.6;
        }

        /* Status indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 12px;
        }

        .status-complete {
            background-color: var(--success-color);
            color: white;
        }

        .status-incomplete {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        /* CodeMirror overrides */
        .CodeMirror {
            height: 200px;
            border-radius: 0.5rem;
            margin-top: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }

        /* Validation results */
        .validation-results {
            margin-top: 12px;
            padding: 12px;
            border-radius: 0.5rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }

        .validation-success {
            background-color: rgba(52, 211, 153, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
        }

        .validation-warning {
            background-color: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning-color);
            color: var(--warning-color);
        }

        .validation-error {
            background-color: rgba(248, 113, 113, 0.1);
            border: 1px solid var(--error-color);
            color: var(--error-color);
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">
    <div class="max-w-4xl mx-auto">
        
        <!-- HEADER -->
        <header class="flex justify-between items-center mb-6 pb-4 border-b border-border-color">
            <div>
                <h1 class="text-3xl font-extrabold">Python Midterm Practice</h1>
                <p class="text-lg text-gray-400">Practice Version - Not the Real Exam</p>
            </div>
            <button id="theme-toggle" class="btn-secondary px-4 py-2 rounded-lg font-semibold shadow-md transition-colors">
                <!-- Text set by JavaScript -->
            </button>
        </header>

        <!-- Timer -->
        <div class="timer-container">
            <div>
                <h2 class="text-xl font-bold">Practice Timer</h2>
                <p class="text-sm">Simulated exam time remaining</p>
            </div>
            <div id="timer-display" class="timer-display">30:00</div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
        </div>

        <!-- MAIN CONTENT -->
        <div id="main-content">
            <div class="instructions mb-8 p-4 section-card rounded-xl">
                <h2 class="text-xl font-bold mb-2">Practice Instructions</h2>
                <p class="mb-2">This is a <strong>practice version</strong> to help you prepare for the real exam.</p>
                <p class="mb-2">Complete the coding question and multiple choice question to practice Python fundamentals.</p>
                <p class="mb-2"><span class="text-yellow-400 font-bold">Sample solution</span> is available for the coding question.</p>
                <p class="mb-2">Select your answer for the multiple choice question - it will be included when you copy all answers.</p>
                <p class="mb-2"><span class="text-orange-400 font-bold">Timer:</span> 30 minutes practice session to simulate exam conditions.</p>
                <p class="text-red-400 font-bold">Note: This is NOT the real exam. The actual exam will have different questions and time limit.</p>
            </div>

            <!-- MODULE 1: Python Fundamentals -->
            <div class="module-section">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--module1-color)">Python Fundamentals Practice</h2>
                
                <!-- Multiple Choice Question -->
                <div class="mcq-container" id="mcq-container-1">
                    <div class="question-header">
                        <div class="question-number">M1</div>
                        <h2 class="text-xl font-bold">Multiple Choice Question</h2>
                        <span class="module-tag mcq-tag">Practice</span>
                        <span id="status-mcq1" class="status-indicator status-incomplete">Not Answered</span>
                    </div>
                    <div class="mcq-question">
                        What is the result of the following Python expression?<br>
                        <code class="text-sm">"Hello" + "World"[1:4]</code>
                    </div>
                    <div class="mcq-options">
                        <div class="mcq-option">
                            <input type="radio" name="mcq1" id="mcq1-a" value="a">
                            <label for="mcq1-a">"HelloWorld"[1:4]</label>
                        </div>
                        <div class="mcq-option">
                            <input type="radio" name="mcq1" id="mcq1-b" value="b">
                            <label for="mcq1-b">"HelloWor"</label>
                        </div>
                        <div class="mcq-option">
                            <input type="radio" name="mcq1" id="mcq1-c" value="c">
                            <label for="mcq1-c">"Helloorl"</label>
                        </div>
                        <div class="mcq-option">
                            <input type="radio" name="mcq1" id="mcq1-d" value="d">
                            <label for="mcq1-d">"Helloorld"</label>
                        </div>
                    </div>
                    <button class="mt-3 px-4 py-2 bg-gray-600 text-white rounded-lg submit-mcq" data-mcq="1">
                        Submit Answer
                    </button>
                </div>

                <!-- Coding Question -->
                <section class="section-card p-4 rounded-xl mb-8" id="question-1">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <h2 class="text-xl font-bold">Temperature Converter</h2>
                        <span class="module-tag module-1">Practice</span>
                        <span id="status-1" class="status-indicator status-incomplete">Not Started</span>
                    </div>
                    <p class="mb-4">Create a program that converts temperatures between Celsius and Fahrenheit. Your program should:</p>
                    <ul class="list-disc list-inside mb-4">
                        <li>Store a temperature value in Celsius (e.g., 25)</li>
                        <li>Convert it to Fahrenheit using the formula: F = (C × 9/5) + 32</li>
                        <li>Print both values in a formatted message</li>
                    </ul>
                    <p class="mb-4">Example output: <code>25°C is equal to 77.0°F</code></p>
                    
                    <div class="code-container">
                        <textarea id="editor1" class="hidden"></textarea>
                        
                        <div class="action-buttons">
                            <button class="run-button btn-primary px-4 py-2 rounded-lg font-semibold text-white" data-section="1">
                                Run Code
                            </button>
                            <button class="copy-button px-4 py-2 bg-slate-500 hover:bg-slate-400 text-white rounded-lg font-semibold transition-colors" data-section="1">
                                Copy Code
                            </button>
                            <button class="validate-button px-4 py-2 bg-yellow-500 hover:bg-yellow-400 text-white rounded-lg font-semibold transition-colors" data-section="1">
                                Validate Syntax
                            </button>
                        </div>

                        <div id="validation-result-1" class="validation-results hidden">
                            <!-- Validation results will appear here -->
                        </div>

                        <div id="output1" class="output-area">
                            Click 'Run Code' to see output...
                        </div>

                        <!-- Sample Solution -->
                        <div class="sample-solution">
                            <div class="sample-header">
                                <span>Sample Solution</span>
                                <button class="toggle-solution" data-section="1">Show Solution</button>
                            </div>
                            <div id="solution1" class="solution-content hidden">
# Temperature Converter - Sample Solution
celsius = 25
fahrenheit = (celsius * 9/5) + 32

print(f"{celsius}°C is equal to {fahrenheit}°F")
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Submission Section -->
            <section class="section-card p-4 rounded-xl mb-8">
                <h2 class="text-xl font-bold mb-4">Submit Your Practice</h2>
                <p class="mb-4">Click the button below to copy your code and multiple choice answer for practice submission.</p>
                
                <div class="flex justify-between items-center">
                    <button id="copy-all-btn" class="btn-primary px-6 py-3 rounded-lg font-semibold text-white text-lg">
                        Copy All Answers
                    </button>
                    <span id="copy-success" class="copy-success">All answers copied to clipboard!</span>
                </div>
                
                <div class="mt-4">
                    <textarea id="submission-area" class="w-full h-64 p-4 bg-gray-800 text-white rounded-lg font-mono text-sm" placeholder="Your code and MCQ answer will appear here after clicking the copy button..."></textarea>
                </div>
            </section>
        </div>
    </div>

    <script>
        // --- Global Variables ---
        const TOTAL_QUESTIONS = 1;
        const TOTAL_MCQS = 1;
        const PRACTICE_DURATION = 30 * 60 * 1000; // 30 minutes in milliseconds
        
        let completedQuestions = new Set();
        let mcqAnswers = {};
        let codeEditors = {};
        let practiceStartTime;
        let timerInterval;

        // --- Utility Functions ---

        // Output function for Skulpt (to capture print() output)
        function outf(text) {
            if (window.currentOutputElement) {
                window.currentOutputElement.textContent = window.currentOutputElement.textContent + text;
            }
        }

        // Standard error function for Skulpt
        function builtinRead(x) {
            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
                throw "File not found: '" + x + "'";
            return Sk.builtinFiles["files"][x];
        }

        // Update progress bar
        function updateProgress() {
            const codingProgress = (completedQuestions.size / TOTAL_QUESTIONS) * 70;
            const mcqProgress = (Object.keys(mcqAnswers).length / TOTAL_MCQS) * 30;
            const totalProgress = codingProgress + mcqProgress;
            document.getElementById('progress-fill').style.width = `${totalProgress}%`;
        }

        // Initialize CodeMirror editors
        function initializeCodeEditors() {
            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                const textarea = document.getElementById(`editor${i}`);
                codeEditors[i] = CodeMirror.fromTextArea(textarea, {
                    mode: 'python',
                    theme: 'material-darker',
                    lineNumbers: true,
                    matchBrackets: true,
                    autoCloseBrackets: true,
                    indentUnit: 4,
                    indentWithTabs: false,
                    extraKeys: {
                        "Tab": function(cm) {
                            cm.replaceSelection("    ", "end");
                        }
                    }
                });
            }
        }

        // Setup practice timer
        function setupPracticeTimer() {
            practiceStartTime = Date.now();
            const endTime = practiceStartTime + PRACTICE_DURATION;
            
            function updateTimer() {
                const now = Date.now();
                const timeLeft = endTime - now;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('timer-display').textContent = '00:00';
                    document.getElementById('timer-display').classList.add('timer-warning');
                    alert('Practice time has ended! Please submit your answers.');
                    return;
                }
                
                const minutes = Math.floor(timeLeft / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                document.getElementById('timer-display').textContent = display;
                
                // Add warning class when less than 5 minutes remain
                if (timeLeft < 5 * 60 * 1000) {
                    document.getElementById('timer-display').classList.add('timer-warning');
                }
            }
            
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);
        }

        // --- Core Application Logic ---

        // Function to run the Python code for a specific section
        function runCode(sectionId) {
            // Get code from the editor
            const prog = codeEditors[sectionId].getValue();
            const outputElement = document.getElementById(`output${sectionId}`);
            outputElement.textContent = 'Output:\n'; // Clear previous output
            outputElement.classList.remove('text-red-400'); // Reset color
            
            // Set the global output element for the outf function
            window.currentOutputElement = outputElement;

            if (typeof Sk === 'undefined') {
                outputElement.textContent = 'Error: Python interpreter (Skulpt) is not loaded.';
                outputElement.classList.add('text-red-400');
                return;
            }

            Sk.pre = "output" + sectionId; 
            Sk.configure({
                output: outf,
                read: builtinRead,
            });

            try {
                Sk.misceval.asyncToPromise(() => {
                    return Sk.importMainWithBody("<stdin>", false, prog, true);
                }).then(() => {
                    console.log(`Execution successful for section ${sectionId}.`);
                    completedQuestions.add(sectionId.toString());
                    
                    // Update status
                    const statusElement = document.getElementById(`status-${sectionId}`);
                    statusElement.textContent = 'Completed';
                    statusElement.className = 'status-indicator status-complete';
                    
                    updateProgress();
                }, (err) => {
                    // Error
                    outputElement.textContent += err.toString();
                    outputElement.classList.add('text-red-400');
                    console.error(`Execution error for section ${sectionId}:`, err);
                });
            } catch (e) {
                outputElement.textContent += e.toString();
                outputElement.classList.add('text-red-400');
            }
        }

        // Function to validate Python syntax using Skulpt's parser
        function validateSyntax(sectionId) {
            const prog = codeEditors[sectionId].getValue();
            const validationElement = document.getElementById(`validation-result-${sectionId}`);
            
            // Clear previous validation results
            validationElement.innerHTML = '';
            validationElement.className = 'validation-results hidden';
            
            if (prog.trim() === '') {
                validationElement.textContent = 'No code to validate.';
                validationElement.className = 'validation-results validation-warning';
                validationElement.classList.remove('hidden');
                return;
            }
            
            validationElement.textContent = 'Validating syntax...';
            validationElement.className = 'validation-results validation-warning';
            validationElement.classList.remove('hidden');
            
            try {
                // Use Skulpt's parser to check syntax
                Sk.importMainWithBody("<stdin>", false, prog, false);
                
                // If we get here, syntax is valid
                validationElement.textContent = '✓ Syntax is valid! You can run your code now.';
                validationElement.className = 'validation-results validation-success';
                
            } catch (err) {
                // Extract meaningful error message
                let errorMessage = err.toString();
                
                // Clean up the error message for better readability
                if (errorMessage.includes('SyntaxError')) {
                    errorMessage = errorMessage.replace(/File "<stdin>", line \d+/g, 'Line');
                    errorMessage = errorMessage.replace(/ParseError/g, 'SyntaxError');
                }
                
                validationElement.textContent = `✗ Syntax Error:\n${errorMessage}`;
                validationElement.className = 'validation-results validation-error';
            }
        }

        // Helper function for copying text to clipboard
        function copyToClipboard(text) {
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = text;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                return true;
            } catch (err) {
                console.error('Copy command failed:', err);
                return false;
            } finally {
                document.body.removeChild(tempTextArea);
            }
        }
        
        // Function to copy the code for a specific section
        function copyCode(sectionId) {
            const code = codeEditors[sectionId].getValue();
            if (copyToClipboard(code)) {
                // Show temporary success message
                const button = document.querySelector(`.copy-button[data-section="${sectionId}"]`);
                const originalText = button.textContent;
                button.textContent = "Copied!";
                setTimeout(() => {
                    button.textContent = originalText;
                }, 1500);
            }
        }
        
        // Function to copy all answers
        function copyAllAnswers() {
            let allCode = "=== PYTHON MIDTERM PRACTICE ===\n\n";
            allCode += "This is a practice version. The real exam will have different questions.\n\n";
            
            // Coding question
            allCode += "=== CODING ANSWER ===\n\n";
            const code = codeEditors[1].getValue();
            allCode += `Question 1:\n${code}\n\n`;
            
            // Multiple choice answer
            allCode += "=== MULTIPLE CHOICE ANSWER ===\n\n";
            const answer = mcqAnswers[1] || "Not answered";
            allCode += `MCQ M1: ${answer}\n`;
            
            const submissionArea = document.getElementById('submission-area');
            submissionArea.value = allCode;
            
            // Copy to clipboard
            if (copyToClipboard(allCode)) {
                // Show success message
                const successMessage = document.getElementById('copy-success');
                successMessage.style.display = 'block';
                
                // Hide message after 3 seconds
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 3000);
            }
        }

        // Function to handle multiple choice questions
        function handleMCQ(mcqId) {
            const selectedOption = document.querySelector(`input[name="mcq${mcqId}"]:checked`);
            const container = document.getElementById(`mcq-container-${mcqId}`);
            
            if (!selectedOption) {
                alert("Please select an answer before submitting!");
                return;
            }

            const answerText = selectedOption.nextElementSibling.textContent;
            
            // Store the answer
            mcqAnswers[mcqId] = answerText;
            
            // Mark as submitted (visual feedback only)
            container.classList.add('mcq-submitted');
            
            // Disable further selection for this question
            const options = document.querySelectorAll(`input[name="mcq${mcqId}"]`);
            options.forEach(opt => {
                opt.disabled = true;
            });
            
            // Change submit button text
            const submitButton = document.querySelector(`.submit-mcq[data-mcq="${mcqId}"]`);
            submitButton.textContent = "Answer Submitted";
            submitButton.disabled = true;
            
            // Update status
            const statusElement = document.getElementById(`status-mcq${mcqId}`);
            statusElement.textContent = 'Answered';
            statusElement.className = 'status-indicator status-complete';
            
            // Update progress
            updateProgress();
        }

        // Function to toggle sample solution for first question only
        function toggleSolution(sectionId) {
            const solutionElement = document.getElementById(`solution${sectionId}`);
            const button = document.querySelector(`.toggle-solution[data-section="${sectionId}"]`);
            
            if (solutionElement.classList.contains('hidden')) {
                solutionElement.classList.remove('hidden');
                button.textContent = 'Hide Solution';
            } else {
                solutionElement.classList.add('hidden');
                button.textContent = 'Show Solution';
            }
        }

        // Function to set up the Light/Dark Mode toggle
        function setupThemeToggle() {
            const toggleButton = document.getElementById('theme-toggle');
            const html = document.documentElement;

            function updateTheme(theme) {
                html.setAttribute('data-theme', theme);
                toggleButton.textContent = theme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
                localStorage.setItem('theme', theme);
                
                // Update CodeMirror theme
                for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                    if (codeEditors[i]) {
                        codeEditors[i].setOption('theme', theme === 'dark' ? 'material-darker' : 'default');
                    }
                }
            }

            const savedTheme = localStorage.getItem('theme') || 'dark';
            updateTheme(savedTheme);

            toggleButton.addEventListener('click', () => {
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                updateTheme(newTheme);
            });
        }

        // Initialize the application
        function initializeApp() {
            // Initialize CodeMirror editors
            initializeCodeEditors();
            
            // Set up practice timer
            setupPracticeTimer();
            
            // Set up event listeners for all coding question buttons
            for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
                document.querySelector(`.run-button[data-section="${i}"]`).addEventListener('click', () => runCode(i));
                document.querySelector(`.copy-button[data-section="${i}"]`).addEventListener('click', () => copyCode(i));
                document.querySelector(`.validate-button[data-section="${i}"]`).addEventListener('click', () => validateSyntax(i));
            }
            
            // Set up multiple choice question handlers
            for (let i = 1; i <= TOTAL_MCQS; i++) {
                document.querySelector(`.submit-mcq[data-mcq="${i}"]`).addEventListener('click', () => handleMCQ(i));
                
                // Add click handlers for MCQ options
                const options = document.querySelectorAll(`input[name="mcq${i}"]`);
                options.forEach(option => {
                    option.addEventListener('change', function() {
                        const allOptions = document.querySelectorAll(`.mcq-option input[name="mcq${i}"]`);
                        allOptions.forEach(opt => {
                            opt.closest('.mcq-option').classList.remove('selected');
                        });
                        this.closest('.mcq-option').classList.add('selected');
                    });
                });
            }
            
            // Set up solution toggle for first question only
            document.querySelector('.toggle-solution').addEventListener('click', () => toggleSolution(1));
            
            // Set up the copy all button
            document.getElementById('copy-all-btn').addEventListener('click', copyAllAnswers);
            
            // Set up theme toggle
            setupThemeToggle();
            
            // Initialize progress bar
            updateProgress();
        }

        // Initialize when the page loads
        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>
